import React, { useState } from 'react';

const SightWordsFlashcards = () => {
  const [currentIndex, setCurrentIndex] = useState(0);
  const [touchStart, setTouchStart] = useState(0);
  const [touchEnd, setTouchEnd] = useState(0);

  const sightWords = [
    // 2-letter words
    'am', 'an', 'as', 'at', 'be', 'by', 'do', 'go', 'he', 'if', 
    'in', 'is', 'it', 'me', 'my', 'no', 'of', 'on', 'or', 'so', 
    'to', 'up', 'us', 'we',
    // 3-letter words
    'all', 'and', 'are', 'but', 'can', 'did', 'for', 'get', 'got', 'had',
    'has', 'her', 'him', 'his', 'how', 'let', 'may', 'new', 'not', 'now',
    'old', 'one', 'our', 'out', 'own', 'put', 'ran', 'run', 'saw', 'say',
    'see', 'she', 'the', 'too', 'two', 'use', 'was', 'way', 'who', 'why',
    'yes', 'you',
    // 4-letter words
    'also', 'back', 'been', 'call', 'came', 'come', 'down', 'each', 'find', 'from',
    'give', 'good', 'have', 'help', 'here', 'into', 'just', 'know', 'like', 'long',
    'look', 'made', 'make', 'many', 'more', 'must', 'name', 'over', 'said', 'some',
    'take', 'than', 'that', 'them', 'then', 'they', 'this', 'time', 'very', 'want',
    'well', 'went', 'were', 'what', 'when', 'will', 'with', 'your'
  ];

  const minSwipeDistance = 50;

  const handleTouchStart = (e) => {
    setTouchEnd(0);
    setTouchStart(e.targetTouches[0].clientX);
  };

  const handleTouchMove = (e) => {
    setTouchEnd(e.targetTouches[0].clientX);
  };

  const handleTouchEnd = () => {
    if (!touchStart || !touchEnd) return;
    
    const distance = touchStart - touchEnd;
    const isLeftSwipe = distance > minSwipeDistance;
    const isRightSwipe = distance < -minSwipeDistance;
    
    if (isLeftSwipe) {
      goNext();
    } else if (isRightSwipe) {
      goPrevious();
    }
  };

  const goNext = () => {
    if (currentIndex < sightWords.length - 1) {
      setCurrentIndex(currentIndex + 1);
    }
  };

  const goPrevious = () => {
    if (currentIndex > 0) {
      setCurrentIndex(currentIndex - 1);
    }
  };

  const handleKeyDown = (e) => {
    if (e.key === 'ArrowRight') {
      goNext();
    } else if (e.key === 'ArrowLeft') {
      goPrevious();
    }
  };

  React.useEffect(() => {
    window.addEventListener('keydown', handleKeyDown);
    return () => window.removeEventListener('keydown', handleKeyDown);
  }, [currentIndex]);

  return (
    <div className="min-h-screen bg-gradient-to-br from-purple-100 via-pink-100 to-blue-100 p-8 flex items-center justify-center">
      <div className="w-full max-w-4xl">
        <h1 className="text-4xl md:text-5xl font-bold text-center mb-8 text-purple-800">
          Sight Words Flash Cards
        </h1>
        
        <div className="text-center mb-6">
          <p className="text-2xl text-purple-700">
            Word {currentIndex + 1} of {sightWords.length}
          </p>
        </div>

        <div
          className="relative bg-white rounded-3xl shadow-2xl p-16 md:p-24 flex items-center justify-center min-h-[400px] cursor-pointer"
          onTouchStart={handleTouchStart}
          onTouchMove={handleTouchMove}
          onTouchEnd={handleTouchEnd}
          onClick={goNext}
        >
          <div className="text-center">
            <h2 className="text-9xl md:text-[12rem] font-bold text-purple-600">
              {sightWords[currentIndex]}
            </h2>
          </div>

          {/* Navigation arrows */}
          {currentIndex > 0 && (
            <button
              onClick={(e) => { e.stopPropagation(); goPrevious(); }}
              className="absolute left-4 md:left-8 top-1/2 transform -translate-y-1/2 bg-purple-500 text-white rounded-full p-4 hover:bg-purple-600 transition"
            >
              <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M15 19l-7-7 7-7" />
              </svg>
            </button>
          )}

          {currentIndex < sightWords.length - 1 && (
            <button
              onClick={(e) => { e.stopPropagation(); goNext(); }}
              className="absolute right-4 md:right-8 top-1/2 transform -translate-y-1/2 bg-purple-500 text-white rounded-full p-4 hover:bg-purple-600 transition"
            >
              <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M9 5l7 7-7 7" />
              </svg>
            </button>
          )}
        </div>

        <div className="mt-8 text-center">
          <p className="text-xl text-purple-700">
            üëÜ Tap or swipe to see the next word
          </p>
          <p className="text-lg text-purple-600 mt-2">
            ‚Üê Swipe left to go back | Swipe right to go forward ‚Üí
          </p>
        </div>

        {/* Progress bar */}
        <div className="mt-8 bg-gray-200 rounded-full h-4 overflow-hidden">
          <div 
            className="bg-gradient-to-r from-purple-500 to-pink-500 h-full transition-all duration-300"
            style={{ width: `${((currentIndex + 1) / sightWords.length) * 100}%` }}
          />
        </div>
      </div>
    </div>
  );
};

export default SightWordsFlashcards;
